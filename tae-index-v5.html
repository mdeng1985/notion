<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°çº¢ä¹¦æ–‡æœ¬æ ¼å¼è½¬æ¢å™¨</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        textarea {
            width: 100%;
            height: 200px;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
            font-family: monospace;
        }
        .button-group {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
        .convert-button {
            background-color: #ff2442;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }
        .convert-button:hover {
            background-color: #e61e39;
        }
        .copy-button {
            background-color: #22c55e;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }
        .copy-button:hover {
            background-color: #16a34a;
        }
        .output {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #fff;
            min-height: 100px;
            white-space: pre-wrap;
            font-family: monospace;
        }
        .toggle-icons {
            background-color: #6366f1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        .toggle-icons:hover {
            background-color: #4f46e5;
        }
        .toggle-icons.active {
            background-color: #4f46e5;
        }
        .description {
            margin-top: 30px;
            padding: 15px;
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            font-size: 14px;
            line-height: 1.6;
        }
        .description h3 {
            margin-top: 0;
            color: #334155;
        }
        .description ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .description .features {
            color: #059669;
        }
        .description .limitations {
            color: #dc2626;
        }
        .color-text-1 { color: #FF6B6B; font-weight: bold; }
        .color-text-2 { color: #4ECDC4; font-weight: bold; }
        .color-text-3 { color: #45B7D1; font-weight: bold; }
        .color-text-4 { color: #96CEB4; font-weight: bold; }
        .color-text-5 { color: #D4A5A5; font-weight: bold; }
        .color-text-6 { color: #9B59B6; font-weight: bold; }
        .color-text-7 { color: #3498DB; font-weight: bold; }
        .color-text-8 { color: #E67E22; font-weight: bold; }
        .color-text-9 { color: #1ABC9C; font-weight: bold; }
        .color-text-10 { color: #F1C40F; font-weight: bold; }
        .content-wrapper {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            margin-top: 30px;
        }
        .feedback-section {
            flex: 1;
            padding: 15px;
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
        }
        .feedback-section h3 {
            margin-top: 0;
            color: #334155;
        }
        .feedback-form textarea {
            width: 100%;
            height: 100px;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
            font-family: inherit;
        }
        .feedback-form input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .feedback-form button {
            background-color: #6366f1;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }
        .feedback-form button:hover {
            background-color: #4f46e5;
        }
        .feedback-status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }
        .feedback-status.success {
            background-color: #dcfce7;
            color: #166534;
            display: block;
        }
        .feedback-status.error {
            background-color: #fee2e2;
            color: #991b1b;
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>å°çº¢ä¹¦æ–‡æœ¬æ ¼å¼è½¬æ¢å™¨</h1>
        <p>è¯·è¾“å…¥ Markdown æ–‡æœ¬ï¼š</p>
        <textarea id="input" placeholder="åœ¨è¿™é‡Œè¾“å…¥ Markdown æ–‡æœ¬..."></textarea>
        <div class="button-group">
            <button class="toggle-icons" id="toggleIcons" onclick="toggleIcons()">å¼€å¯å›¾æ ‡è£…é¥°</button>
            <button class="convert-button" onclick="convertText()">è½¬æ¢æ ¼å¼</button>
            <button class="copy-button" onclick="copyToClipboard()">å¤åˆ¶åˆ°å‰ªè´´æ¿</button>
        </div>
        <p>è½¬æ¢ç»“æœï¼š</p>
        <div class="output" id="output"></div>
        
        <div class="content-wrapper">
            <div class="description">
                <h3>åŠŸèƒ½è¯´æ˜</h3>
                <div class="features">
                    <strong>ä¸»è¦åŠŸèƒ½ï¼š</strong>
                    <ul>
                        <li>å®ç°ä¸åŒçº§ Markdown æ ‡é¢˜çš„è‡ªåŠ¨ç¼–å·</li>
                        <li>æ·»åŠ å›¾æ ‡ä¿®é¥°ç¬¦</li>
                    </ul>
                </div>
                <div class="limitations">
                    <strong>ä¸è¶³ï¼š</strong>
                    <ul>
                        <li>æ— æ³•åˆ—è¡¨å®ç°ç¼©è¿›</li>
                    </ul>
                </div>
            </div>
            
            <div class="feedback-section">
                <h3>åŠŸèƒ½åé¦ˆ</h3>
                <form class="feedback-form" id="feedbackForm" onsubmit="submitFeedback(event)">
                    <textarea name="suggestion" placeholder="è¯·è¾“å…¥æ‚¨æœŸå¾…çš„æ–°åŠŸèƒ½..." required></textarea>
                    <input type="email" name="email" placeholder="è¯·è¾“å…¥æ‚¨çš„é‚®ç®±..." required>
                    <button type="submit">æäº¤åé¦ˆ</button>
                </form>
                <div id="feedbackStatus" class="feedback-status"></div>
            </div>
        </div>
    </div>

    <script>
        let useIcons = false;
        const textColors = [
            'color-text-1', 'color-text-2', 'color-text-3', 'color-text-4', 'color-text-5',
            'color-text-6', 'color-text-7', 'color-text-8', 'color-text-9', 'color-text-10'
        ];

        function toggleIcons() {
            useIcons = !useIcons;
            const button = document.getElementById('toggleIcons');
            button.textContent = useIcons ? 'å…³é—­å›¾æ ‡è£…é¥°' : 'å¼€å¯å›¾æ ‡è£…é¥°';
            button.classList.toggle('active');
        }

        function toChineseNumber(num) {
            const chineseNumbers = ['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'ä¸ƒ', 'å…«', 'ä¹', 'å'];
            if (num <= 10) return chineseNumbers[num - 1];
            if (num < 20) return 'å' + (num % 10 === 0 ? '' : chineseNumbers[num % 10 - 1]);
            const tens = chineseNumbers[Math.floor(num / 10) - 1];
            return tens + 'å' + (num % 10 === 0 ? '' : chineseNumbers[num % 10 - 1]);
        }

        const circledNumbers = ['â‘ ', 'â‘¡', 'â‘¢', 'â‘£', 'â‘¤', 'â‘¥', 'â‘¦', 'â‘§', 'â‘¨', 'â‘©', 'â‘ª', 'â‘«', 'â‘¬', 'â‘­', 'â‘®', 'â‘¯', 'â‘°', 'â‘±', 'â‘²', 'â‘³'];
        const colorfulIcons = ['ğŸŒˆ', 'âœ¨', 'ğŸ’«', 'â­', 'ğŸŒŸ', 'ğŸ’–', 'ğŸ’', 'ğŸ’•', 'ğŸ’—', 'ğŸ’“', 'ğŸ¨', 'ğŸ¯', 'ğŸª', 'ğŸ­', 'ğŸ '];
        const letters = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't'];

        function convertText() {
            const input = document.getElementById('input').value;
            let output = input;

            // è½¬æ¢æ ‡é¢˜
            let h1Count = 0;
            let h2Count = 0;
            let h3Count = 0;
            let h4Count = 0;

            output = output.replace(/^# (.*$)/gm, (match, content) => {
                h1Count++;
                return `${toChineseNumber(h1Count)}ã€${content}`;
            });
            output = output.replace(/^## (.*$)/gm, (match, content) => {
                h2Count++;
                return `(${h2Count}) ${content}`;
            });
            output = output.replace(/^### (.*$)/gm, (match, content) => {
                h3Count++;
                return `${circledNumbers[h3Count - 1]} ${content}`;
            });
            output = output.replace(/^#### (.*$)/gm, (match, content) => {
                h4Count++;
                return `${letters[h4Count - 1]}. ${content}`;
            });

            // è½¬æ¢åˆ—è¡¨
            let lines = output.split('\n');
            let currentLevel = 0;
            let numbersByLevel = {};

            lines = lines.map(line => {
                const listMatch = line.match(/^(\s*)-\s(.*)$/);
                if (listMatch) {
                    const spaces = (listMatch[1] || '').length;
                    const level = Math.floor(spaces / 2);

                    if (!numbersByLevel[level]) {
                        numbersByLevel[level] = 0;
                    }

                    numbersByLevel[level]++;
                    const indent = '    '.repeat(level);
                    const number = numbersByLevel[level];

                    return `${indent}${number}. ${listMatch[2]}`;
                }

                if (!line.trim().startsWith('-')) {
                    numbersByLevel = {};
                }
                return line;
            });

            output = lines.join('\n');

            // è½¬æ¢å¼ºè°ƒ
            output = output.replace(/\*\*(.*?)\*\*/g, (match, content) => {
                const randomColor = textColors[Math.floor(Math.random() * textColors.length)];
                const coloredText = `<span class="${randomColor}">${content}</span>`;
                if (useIcons) {
                    const randomIcon = colorfulIcons[Math.floor(Math.random() * colorfulIcons.length)];
                    return `${coloredText}${randomIcon}`;
                }
                return coloredText;
            });
            output = output.replace(/\*(.*?)\*/g, 'ğ˜$1ğ˜');

            // æ˜¾ç¤ºç»“æœ
            const outputDiv = document.getElementById('output');
            outputDiv.innerHTML = output;
        }

        function copyToClipboard() {
            const outputDiv = document.getElementById('output');
            const text = outputDiv.innerText;
            navigator.clipboard.writeText(text).then(() => {
                const copyButton = document.querySelector('.copy-button');
                const originalText = copyButton.innerText;
                copyButton.innerText = 'å¤åˆ¶æˆåŠŸï¼';
                copyButton.style.backgroundColor = '#16a34a';
                setTimeout(() => {
                    copyButton.innerText = originalText;
                    copyButton.style.backgroundColor = '#22c55e';
                }, 2000);
            }).catch(err => {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
                console.error('å¤åˆ¶å¤±è´¥ï¼š', err);
            });
        }

        async function submitFeedback(event) {
    event.preventDefault();
    const form = event.target;
    const suggestion = form.suggestion.value;
    const email = form.email.value;
    const statusDiv = document.getElementById('feedbackStatus');

    try {
        const response = await fetch('https://formspree.io/f/meoevgdv', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                message: suggestion,
                email: email,
                _subject: 'å°çº¢ä¹¦æ–‡æœ¬è½¬æ¢å™¨åŠŸèƒ½åé¦ˆ',
                _replyto: email
            })
        });

        if (response.ok) {
            statusDiv.textContent = 'æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼';
            statusDiv.className = 'feedback-status success';
            form.reset();
        } else {
            throw new Error('æäº¤å¤±è´¥');
        }
    } catch (error) {
        statusDiv.textContent = 'æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
        statusDiv.className = 'feedback-status error';
    }
        }
    </script>
</body>
</html>